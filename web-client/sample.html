<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RabbitMQ WebSocket Example</title>
<script src="https://cdn.jsdelivr.net/npm/stompjs/lib/stomp.min.js"></script>
</head>
<body>
<h1>RabbitMQ WebSocket Example</h1>
<div id="messages"></div>

<script>
    // WebSocket URL (replace with your RabbitMQ server address)
    const websocketUrl = 'ws://192.168.49.2:30073/ws';

    // STOMP client
    const client = Stomp.over(websocketUrl);

    // Connect to RabbitMQ
    client.connect({}, function(frame) {
    console.log('Connected to RabbitMQ');

    // Subscribe to a queue or exchange
    const queueName = '/queue/test';
    client.subscribe(queueName, function(message) {
    const messageBody = message.body;
    console.log('Received message:', messageBody);

    // Display the message in the browser
    const messagesDiv = document.getElementById('messages');
    messagesDiv.innerHTML += `<p>${messageBody}</p>`;
});

    // Send a message to the queue
    const message = 'Hello, RabbitMQ!';
    client.send(queueName, {}, message);
    console.log('Sent message:', message);
}, function(error) {
    console.error('Error connecting to RabbitMQ:', error);
});
</script>
</body>
</html>